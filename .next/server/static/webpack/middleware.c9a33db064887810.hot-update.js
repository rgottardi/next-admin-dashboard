"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("middleware",{

/***/ "(middleware)/./middleware.ts":
/*!***********************!*\
  !*** ./middleware.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   middleware: () => (/* binding */ middleware)\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(middleware)/./node_modules/@supabase/ssr/dist/module/index.js\");\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(middleware)/./node_modules/next/dist/esm/server/web/exports/next-response.js\");\n\n\nasync function middleware(request) {\n    let response = next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].next({\n        request: {\n            headers: request.headers\n        }\n    });\n    const supabase = (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(\"https://angkptlhbeusakaasgyr.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFuZ2twdGxoYmV1c2FrYWFzZ3lyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk2NDQ4NTgsImV4cCI6MjA1NTIyMDg1OH0.JKpzw9kOu1WcMm_D8W7WnVFo0sMujf8YiubXHexQnT8\", {\n        cookies: {\n            getAll () {\n                return request.cookies.getAll();\n            },\n            setAll (cookiesToSet) {\n                cookiesToSet.forEach(({ name, value, options })=>{\n                    response.cookies.set(name, value, options);\n                });\n            }\n        }\n    });\n    const { data: { user } } = await supabase.auth.getUser();\n    // If user is not logged in and trying to access protected routes\n    if (!user && !request.nextUrl.pathname.startsWith(\"/login\") && !request.nextUrl.pathname.startsWith(\"/auth/signout\")) {\n        const redirectUrl = new URL(\"/login\", request.url);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].redirect(redirectUrl);\n    }\n    // If user is logged in, get their role\n    if (user) {\n        const { data: profile } = await supabase.from(\"profiles\").select(\"role\").eq(\"id\", user.id).single();\n        const userRole = profile?.role || \"user\";\n        // Redirect from login/register pages if already logged in\n        if (request.nextUrl.pathname.startsWith(\"/login\") || request.nextUrl.pathname === \"/\") {\n            const redirectUrl = new URL(userRole === \"admin\" ? \"/admin\" : \"/user\", request.url);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].redirect(redirectUrl);\n        }\n        // Protect admin routes\n        if (request.nextUrl.pathname.startsWith(\"/admin\") && userRole !== \"admin\") {\n            const redirectUrl = new URL(\"/user\", request.url);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].redirect(redirectUrl);\n        }\n        // Protect user routes from admin (optional, remove if admins should access user routes)\n        if (request.nextUrl.pathname.startsWith(\"/user\") && userRole === \"admin\") {\n            const redirectUrl = new URL(\"/admin\", request.url);\n            return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_1__[\"default\"].redirect(redirectUrl);\n        }\n    }\n    return response;\n}\nconst config = {\n    matcher: [\n        /*\n     * Match all request paths except for the ones starting with:\n     * - _next/static (static files)\n     * - _next/image (image optimization files)\n     * - favicon.ico (favicon file)\n     * Feel free to modify this pattern to include more paths.\n     */ \"/((?!_next/static|_next/image|favicon.ico|.*\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)\"\n    ]\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vbWlkZGxld2FyZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQWtEO0FBQ1U7QUFFckQsZUFBZUUsV0FBV0MsT0FBb0I7SUFDbkQsSUFBSUMsV0FBV0gsa0ZBQVlBLENBQUNJLElBQUksQ0FBQztRQUMvQkYsU0FBUztZQUNQRyxTQUFTSCxRQUFRRyxPQUFPO1FBQzFCO0lBQ0Y7SUFFQSxNQUFNQyxXQUFXUCxpRUFBa0JBLENBQ2pDUSwwQ0FBb0MsRUFDcENBLGtOQUF5QyxFQUN6QztRQUNFSSxTQUFTO1lBQ1BDO2dCQUNFLE9BQU9WLFFBQVFTLE9BQU8sQ0FBQ0MsTUFBTTtZQUMvQjtZQUNBQyxRQUFPQyxZQUFZO2dCQUNqQkEsYUFBYUMsT0FBTyxDQUFDLENBQUMsRUFBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBRTtvQkFDNUNmLFNBQVNRLE9BQU8sQ0FBQ1EsR0FBRyxDQUFDSCxNQUFNQyxPQUFPQztnQkFDcEM7WUFDRjtRQUNGO0lBQ0Y7SUFHRixNQUFNLEVBQ0pFLE1BQU0sRUFBRUMsSUFBSSxFQUFFLEVBQ2YsR0FBRyxNQUFNZixTQUFTZ0IsSUFBSSxDQUFDQyxPQUFPO0lBRS9CLGlFQUFpRTtJQUNqRSxJQUNFLENBQUNGLFFBQ0QsQ0FBQ25CLFFBQVFzQixPQUFPLENBQUNDLFFBQVEsQ0FBQ0MsVUFBVSxDQUFDLGFBQ3JDLENBQUN4QixRQUFRc0IsT0FBTyxDQUFDQyxRQUFRLENBQUNDLFVBQVUsQ0FBQyxrQkFDckM7UUFDQSxNQUFNQyxjQUFjLElBQUlDLElBQUksVUFBVTFCLFFBQVEyQixHQUFHO1FBQ2pELE9BQU83QixrRkFBWUEsQ0FBQzhCLFFBQVEsQ0FBQ0g7SUFDL0I7SUFFQSx1Q0FBdUM7SUFDdkMsSUFBSU4sTUFBTTtRQUNSLE1BQU0sRUFBRUQsTUFBTVcsT0FBTyxFQUFFLEdBQUcsTUFBTXpCLFNBQzdCMEIsSUFBSSxDQUFDLFlBQ0xDLE1BQU0sQ0FBQyxRQUNQQyxFQUFFLENBQUMsTUFBTWIsS0FBS2MsRUFBRSxFQUNoQkMsTUFBTTtRQUVULE1BQU1DLFdBQVdOLFNBQVNPLFFBQVE7UUFFbEMsMERBQTBEO1FBQzFELElBQ0VwQyxRQUFRc0IsT0FBTyxDQUFDQyxRQUFRLENBQUNDLFVBQVUsQ0FBQyxhQUNwQ3hCLFFBQVFzQixPQUFPLENBQUNDLFFBQVEsS0FBSyxLQUM3QjtZQUNBLE1BQU1FLGNBQWMsSUFBSUMsSUFDdEJTLGFBQWEsVUFBVSxXQUFXLFNBQ2xDbkMsUUFBUTJCLEdBQUc7WUFFYixPQUFPN0Isa0ZBQVlBLENBQUM4QixRQUFRLENBQUNIO1FBQy9CO1FBRUEsdUJBQXVCO1FBQ3ZCLElBQ0V6QixRQUFRc0IsT0FBTyxDQUFDQyxRQUFRLENBQUNDLFVBQVUsQ0FBQyxhQUNwQ1csYUFBYSxTQUNiO1lBQ0EsTUFBTVYsY0FBYyxJQUFJQyxJQUFJLFNBQVMxQixRQUFRMkIsR0FBRztZQUNoRCxPQUFPN0Isa0ZBQVlBLENBQUM4QixRQUFRLENBQUNIO1FBQy9CO1FBRUEsd0ZBQXdGO1FBQ3hGLElBQ0V6QixRQUFRc0IsT0FBTyxDQUFDQyxRQUFRLENBQUNDLFVBQVUsQ0FBQyxZQUNwQ1csYUFBYSxTQUNiO1lBQ0EsTUFBTVYsY0FBYyxJQUFJQyxJQUFJLFVBQVUxQixRQUFRMkIsR0FBRztZQUNqRCxPQUFPN0Isa0ZBQVlBLENBQUM4QixRQUFRLENBQUNIO1FBQy9CO0lBQ0Y7SUFFQSxPQUFPeEI7QUFDVDtBQUVPLE1BQU1vQyxTQUFTO0lBQ3BCQyxTQUFTO1FBQ1A7Ozs7OztLQU1DLEdBQ0Q7S0FDRDtBQUNILEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vbWlkZGxld2FyZS50cz80MjJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVNlcnZlckNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zc3InXG5pbXBvcnQgeyBOZXh0UmVzcG9uc2UsIHR5cGUgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcidcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1pZGRsZXdhcmUocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgbGV0IHJlc3BvbnNlID0gTmV4dFJlc3BvbnNlLm5leHQoe1xuICAgIHJlcXVlc3Q6IHtcbiAgICAgIGhlYWRlcnM6IHJlcXVlc3QuaGVhZGVycyxcbiAgICB9LFxuICB9KVxuXG4gIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlU2VydmVyQ2xpZW50KFxuICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXG4gICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkhLFxuICAgIHtcbiAgICAgIGNvb2tpZXM6IHtcbiAgICAgICAgZ2V0QWxsKCkge1xuICAgICAgICAgIHJldHVybiByZXF1ZXN0LmNvb2tpZXMuZ2V0QWxsKClcbiAgICAgICAgfSxcbiAgICAgICAgc2V0QWxsKGNvb2tpZXNUb1NldCkge1xuICAgICAgICAgIGNvb2tpZXNUb1NldC5mb3JFYWNoKCh7IG5hbWUsIHZhbHVlLCBvcHRpb25zIH0pID0+IHtcbiAgICAgICAgICAgIHJlc3BvbnNlLmNvb2tpZXMuc2V0KG5hbWUsIHZhbHVlLCBvcHRpb25zKVxuICAgICAgICAgIH0pXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH1cbiAgKVxuXG4gIGNvbnN0IHtcbiAgICBkYXRhOiB7IHVzZXIgfSxcbiAgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGguZ2V0VXNlcigpXG5cbiAgLy8gSWYgdXNlciBpcyBub3QgbG9nZ2VkIGluIGFuZCB0cnlpbmcgdG8gYWNjZXNzIHByb3RlY3RlZCByb3V0ZXNcbiAgaWYgKFxuICAgICF1c2VyICYmXG4gICAgIXJlcXVlc3QubmV4dFVybC5wYXRobmFtZS5zdGFydHNXaXRoKCcvbG9naW4nKSAmJlxuICAgICFyZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUuc3RhcnRzV2l0aCgnL2F1dGgvc2lnbm91dCcpXG4gICkge1xuICAgIGNvbnN0IHJlZGlyZWN0VXJsID0gbmV3IFVSTCgnL2xvZ2luJywgcmVxdWVzdC51cmwpXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5yZWRpcmVjdChyZWRpcmVjdFVybClcbiAgfVxuXG4gIC8vIElmIHVzZXIgaXMgbG9nZ2VkIGluLCBnZXQgdGhlaXIgcm9sZVxuICBpZiAodXNlcikge1xuICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdwcm9maWxlcycpXG4gICAgICAuc2VsZWN0KCdyb2xlJylcbiAgICAgIC5lcSgnaWQnLCB1c2VyLmlkKVxuICAgICAgLnNpbmdsZSgpXG5cbiAgICBjb25zdCB1c2VyUm9sZSA9IHByb2ZpbGU/LnJvbGUgfHwgJ3VzZXInXG5cbiAgICAvLyBSZWRpcmVjdCBmcm9tIGxvZ2luL3JlZ2lzdGVyIHBhZ2VzIGlmIGFscmVhZHkgbG9nZ2VkIGluXG4gICAgaWYgKFxuICAgICAgcmVxdWVzdC5uZXh0VXJsLnBhdGhuYW1lLnN0YXJ0c1dpdGgoJy9sb2dpbicpIHx8XG4gICAgICByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUgPT09ICcvJ1xuICAgICkge1xuICAgICAgY29uc3QgcmVkaXJlY3RVcmwgPSBuZXcgVVJMKFxuICAgICAgICB1c2VyUm9sZSA9PT0gJ2FkbWluJyA/ICcvYWRtaW4nIDogJy91c2VyJyxcbiAgICAgICAgcmVxdWVzdC51cmxcbiAgICAgIClcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UucmVkaXJlY3QocmVkaXJlY3RVcmwpXG4gICAgfVxuXG4gICAgLy8gUHJvdGVjdCBhZG1pbiByb3V0ZXNcbiAgICBpZiAoXG4gICAgICByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUuc3RhcnRzV2l0aCgnL2FkbWluJykgJiZcbiAgICAgIHVzZXJSb2xlICE9PSAnYWRtaW4nXG4gICAgKSB7XG4gICAgICBjb25zdCByZWRpcmVjdFVybCA9IG5ldyBVUkwoJy91c2VyJywgcmVxdWVzdC51cmwpXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KHJlZGlyZWN0VXJsKVxuICAgIH1cblxuICAgIC8vIFByb3RlY3QgdXNlciByb3V0ZXMgZnJvbSBhZG1pbiAob3B0aW9uYWwsIHJlbW92ZSBpZiBhZG1pbnMgc2hvdWxkIGFjY2VzcyB1c2VyIHJvdXRlcylcbiAgICBpZiAoXG4gICAgICByZXF1ZXN0Lm5leHRVcmwucGF0aG5hbWUuc3RhcnRzV2l0aCgnL3VzZXInKSAmJlxuICAgICAgdXNlclJvbGUgPT09ICdhZG1pbidcbiAgICApIHtcbiAgICAgIGNvbnN0IHJlZGlyZWN0VXJsID0gbmV3IFVSTCgnL2FkbWluJywgcmVxdWVzdC51cmwpXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLnJlZGlyZWN0KHJlZGlyZWN0VXJsKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXNwb25zZVxufVxuXG5leHBvcnQgY29uc3QgY29uZmlnID0ge1xuICBtYXRjaGVyOiBbXG4gICAgLypcbiAgICAgKiBNYXRjaCBhbGwgcmVxdWVzdCBwYXRocyBleGNlcHQgZm9yIHRoZSBvbmVzIHN0YXJ0aW5nIHdpdGg6XG4gICAgICogLSBfbmV4dC9zdGF0aWMgKHN0YXRpYyBmaWxlcylcbiAgICAgKiAtIF9uZXh0L2ltYWdlIChpbWFnZSBvcHRpbWl6YXRpb24gZmlsZXMpXG4gICAgICogLSBmYXZpY29uLmljbyAoZmF2aWNvbiBmaWxlKVxuICAgICAqIEZlZWwgZnJlZSB0byBtb2RpZnkgdGhpcyBwYXR0ZXJuIHRvIGluY2x1ZGUgbW9yZSBwYXRocy5cbiAgICAgKi9cbiAgICAnLygoPyFfbmV4dC9zdGF0aWN8X25leHQvaW1hZ2V8ZmF2aWNvbi5pY298LipcXFxcLig/OnN2Z3xwbmd8anBnfGpwZWd8Z2lmfHdlYnApJCkuKiknLFxuICBdLFxufSJdLCJuYW1lcyI6WyJjcmVhdGVTZXJ2ZXJDbGllbnQiLCJOZXh0UmVzcG9uc2UiLCJtaWRkbGV3YXJlIiwicmVxdWVzdCIsInJlc3BvbnNlIiwibmV4dCIsImhlYWRlcnMiLCJzdXBhYmFzZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImNvb2tpZXMiLCJnZXRBbGwiLCJzZXRBbGwiLCJjb29raWVzVG9TZXQiLCJmb3JFYWNoIiwibmFtZSIsInZhbHVlIiwib3B0aW9ucyIsInNldCIsImRhdGEiLCJ1c2VyIiwiYXV0aCIsImdldFVzZXIiLCJuZXh0VXJsIiwicGF0aG5hbWUiLCJzdGFydHNXaXRoIiwicmVkaXJlY3RVcmwiLCJVUkwiLCJ1cmwiLCJyZWRpcmVjdCIsInByb2ZpbGUiLCJmcm9tIiwic2VsZWN0IiwiZXEiLCJpZCIsInNpbmdsZSIsInVzZXJSb2xlIiwicm9sZSIsImNvbmZpZyIsIm1hdGNoZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./middleware.ts\n");

/***/ })

});